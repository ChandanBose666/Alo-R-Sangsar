---
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import products from "../../data/products.json";

// Shared UI Components
import Breadcrumbs from "../../components/ui/Breadcrumbs.astro";

// PDP Specific Components
import ProductGallery from "../../components/products/ProductGallery.astro";
import ProductHeader from "../../components/products/ProductHeader.astro";
import ProductSelection from "../../components/products/ProductSelection.astro";
import PaymentRewards from "../../components/products/PaymentRewards.astro";
import ProductStatus from "../../components/products/ProductStatus.astro";

export async function getStaticPaths() {
  return products.map((product) => ({
    params: { id: product.id.toString() },
    props: { product },
  }));
}

const { product } = Astro.props;

const breadcrumbItems = [
  { label: "Home", href: "/" },
  { label: product.title },
];
---

<Layout>
  <Navbar />

  <main class="bg-white min-h-screen pt-24 pb-20">
    <div class="container mx-auto px-4">
      <Breadcrumbs items={breadcrumbItems} />

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
        <!-- Left Column: Image Gallery -->
        <ProductGallery
          mainImage={product.imageUrl}
          images={product.images || []}
          title={product.title}
        />

        <!-- Right Column: Product Info -->
        <div class="flex flex-col">
          <ProductHeader
            title={product.title}
            price={product.price}
            originalPrice={product.originalPrice}
            discount={product.discount}
            reviewsCount={product.reviewsCount || 0}
          />

          <!-- Description (Brief) -->
          <p class="text-gray-600 leading-relaxed mb-8">
            {product.description}
          </p>

          <PaymentRewards price={product.price} />

          <ProductSelection sizes={product.sizes} />

          <ProductStatus />
        </div>
      </div>
    </div>
  </main>

  <Footer />
</Layout>
